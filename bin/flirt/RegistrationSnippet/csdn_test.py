__author__ = 'zhouguangfu'
__author__ = 'zgf'

import random
import multiprocessing

from urllib2 import urlopen
import urllib

blog_id = [
           44487545,
           44495985,
           44488707,
           44494791,
           44495785,
           44513559,
           44513559,
           44514059,
           44513673,
           44523019,
           44457147,
           44457251,
           44457325,
           44457419,
           44457455,
           44457519,
           44457603,
           44457663,
           44457711,
           44457755,
           44457809,
           44457889,
           44159423,
           44162375,
           44217379,
           44217885,
           44018185,
           44005413,
           44002503,
           43967133,
           43967121,
           43967097,
           43967063,
           43405051,
           41415639,
           41415561,
           41415531,
           41415439,
           41415413,
           41415319,
           41415291,
           41415271,
           41415247,
           41415193,
           41414045,
           41414009,
           41413449,
           41413413,
           41413325,
           41413025,
           41411679,
           41408309,
           41408233,
           41408077,
           41407967,
           41407881,
           41407765,
           41407551,
           41407475,
           41406557,
           41252925,
           41085083,
           47848513,
           47848153,
           47843949,
           47831245,
           47808301,
           47807133,
           47806837,
           47780619,
           47785157,
           47804425,
           47804691,
           47777579,
           47763665,
           47416675,
           47297841,
           47273775,
           47273765,
           46916219,
           46876891,
           46638445,
           46612143,
           46609561,
           46545335,
           46538621,
           45950307,
           45641681,
           45556123,
           44853135,
           44853031,
           44852969,
           44852871,
           44832147,
           44831055,
           44544007,
           44538295,
           44538005,
           44537509,
           44524935,
           44523343,
           44523019,
           44514059,
           44513673,
           44513559,
           44495985,
           44495785]

urlopen.addheaders = [('User-agent', 'Mozilla/5.0')]

def singleProcess(id):
    num = random.randint(1, 100)
    for j in range(num):
        opener = urllib.FancyURLopener({})
        opener.addheaders = [('User-agent', 'Mozilla/5.0')]
        tempUrl = 'http://blog.csdn.net/guang09080908/article/details/' + str(id)
        print 'id: ', id, '-----', j

        try:
            f = opener.open(tempUrl)
            f.read()
        except Exception:
            f.close()
            print '----------------------------exception--------------------------'

pool = multiprocessing.Pool(processes=multiprocessing.cpu_count())
pool_outputs = pool.map(singleProcess,  blog_id)
pool.close()
pool.join()



